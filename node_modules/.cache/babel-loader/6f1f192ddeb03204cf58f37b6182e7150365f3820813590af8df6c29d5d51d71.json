{"ast":null,"code":"var _jsxFileName = \"/Users/khatiazitanishvili/Downloads/we2.blatt11-main 4/src/components/PageAdmin.tsx\",\n  _s = $RefreshSig$();\nimport React, { Fragment, useState } from \"react\";\nimport { deleteUser, getUsers, isUserAdmin } from \"../backend/boardapi\";\nimport LoadingIndicator from \"./LoadingIndicator\";\nimport { Container, Row, Col, Button, Card } from \"react-bootstrap\";\nimport { useUserIDContext } from \"./UserIdContext\";\nimport { useErrorHandler } from \"react-error-boundary\";\nimport User from \"./User\";\nimport { useNavigate } from \"react-router-dom\";\nimport UserCreateDialog from \"./UserCreateDialog\";\nimport UserEditDialog from \"./UserEditDialog\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function PageAdmin() {\n  _s();\n  const [myEntries, setMyEntries] = useState();\n  const [showDlg, setShowDlg] = React.useState(false);\n  const [showDlg2, setShowDlg2] = React.useState(false);\n  const [isCreate, setCreateOrEdit] = React.useState(true);\n  const {\n    userID\n  } = useUserIDContext();\n  const handleError = useErrorHandler();\n  const [userResource, setUserResource] = useState({\n    name: \"\",\n    email: \"\",\n    admin: false\n  });\n  const navigate = useNavigate();\n  function showCreate() {\n    setShowDlg(true);\n  }\n  async function showEdit(userResource) {\n    setUserResource({\n      name: userResource.name,\n      email: userResource.email,\n      admin: userResource.admin,\n      password: userResource.password,\n      id: userResource.id\n    });\n    setCreateOrEdit(false);\n    setShowDlg2(true);\n  }\n  function hide() {\n    setShowDlg(false);\n    setShowDlg2(false);\n  }\n  async function onDelete(id) {\n    await deleteUser(id);\n  }\n  async function load() {\n    try {\n      if (userID === undefined) {\n        navigate(\"/\");\n      } else {\n        const adminCheck = await isUserAdmin(userID);\n        if (myEntries && adminCheck) {\n          setMyEntries(await getUsers());\n        }\n        const c = await getUsers();\n        setMyEntries(c);\n      }\n    } catch (err) {\n      setMyEntries(null);\n      handleError(err);\n    }\n  }\n  React.useEffect(() => {\n    load();\n  }, [myEntries]);\n  React.useEffect(() => {\n    hide();\n  }, []);\n  if (!myEntries) {\n    return /*#__PURE__*/_jsxDEV(LoadingIndicator, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 16\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          xs: 2,\n          md: 4,\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Alle registrierten User\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              style: {\n                marginRight: '10px'\n              },\n              onClick: () => {\n                showCreate();\n              },\n              children: \"Create User\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"g-2\",\n          children: myEntries.users.map(myEntry => /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              style: {\n                width: '20rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Card.Body, {\n                children: /*#__PURE__*/_jsxDEV(User, {\n                  user: myEntry\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Card.Footer, {\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"success\",\n                  style: {\n                    marginRight: '10px'\n                  },\n                  onClick: () => {\n                    showEdit(myEntry);\n                  },\n                  children: \"Edit User\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 41\n                }, this), myEntry.id !== userID ? /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"danger\",\n                  style: {\n                    marginRight: '10px'\n                  },\n                  onClick: () => {\n                    onDelete(myEntry.id);\n                  },\n                  children: \"Delete User\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 37\n              }, this)]\n            }, myEntry.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 35\n            }, this)\n          }, void 0, false))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Fragment, {\n        children: /*#__PURE__*/_jsxDEV(UserCreateDialog, {\n          show: showDlg,\n          onHide: hide\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Fragment, {\n        children: /*#__PURE__*/_jsxDEV(UserEditDialog, {\n          userResource: userResource,\n          setUserResource: setUserResource,\n          show: showDlg2,\n          onHide: hide\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this);\n  }\n}\n_s(PageAdmin, \"4SLZMW+bxsswpYH1F57RgOg87lc=\", false, function () {\n  return [useUserIDContext, useErrorHandler, useNavigate];\n});\n_c = PageAdmin;\nvar _c;\n$RefreshReg$(_c, \"PageAdmin\");","map":{"version":3,"names":["React","Fragment","useState","deleteUser","getUsers","isUserAdmin","LoadingIndicator","Container","Row","Col","Button","Card","useUserIDContext","useErrorHandler","User","useNavigate","UserCreateDialog","UserEditDialog","PageAdmin","myEntries","setMyEntries","showDlg","setShowDlg","showDlg2","setShowDlg2","isCreate","setCreateOrEdit","userID","handleError","userResource","setUserResource","name","email","admin","navigate","showCreate","showEdit","password","id","hide","onDelete","load","undefined","adminCheck","c","err","useEffect","marginRight","users","map","myEntry","width"],"sources":["/Users/khatiazitanishvili/Downloads/we2.blatt11-main 4/src/components/PageAdmin.tsx"],"sourcesContent":["import React, { Fragment, useState } from \"react\";\nimport { deleteUser, getUsers, isUserAdmin } from \"../backend/boardapi\";\nimport LoadingIndicator from \"./LoadingIndicator\";\nimport { Container, Row, Col, Button, Dropdown, Card } from \"react-bootstrap\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { useUserIDContext } from \"./UserIdContext\";\nimport { useErrorHandler } from \"react-error-boundary\";\nimport { UserResource, UsersResource } from \"../AdministerUsersService\";\nimport User from \"./User\";\nimport UserDialog from \"./UserCreateDialog\";\nimport { useNavigate } from \"react-router-dom\";\nimport UserCreateDialog from \"./UserCreateDialog\";\nimport UserEditDialog from \"./UserEditDialog\";\n\nexport default function PageAdmin() {\n    const [myEntries, setMyEntries] = useState<UsersResource | null>();\n    const [showDlg, setShowDlg] = React.useState(false);\n    const [showDlg2, setShowDlg2] = React.useState(false);\n    const [isCreate, setCreateOrEdit] = React.useState(true);\n    const { userID } = useUserIDContext();\n    const handleError = useErrorHandler();\n    const [userResource, setUserResource] = useState<UserResource>({ name: \"\", email: \"\", admin: false });\n    const navigate = useNavigate();\n\n    function showCreate() { setShowDlg(true); }\n\n    async function showEdit(userResource: UserResource) {\n        setUserResource({\n            name: userResource.name, email: userResource.email, admin: userResource.admin,\n            password: userResource.password, id: userResource.id\n        } as UserResource);\n        setCreateOrEdit(false);\n        setShowDlg2(true);\n    }\n\n    function hide() { setShowDlg(false); setShowDlg2(false); }\n\n    async function onDelete(id: string) {\n        await deleteUser(id);\n    }\n\n    async function load() {\n        try {\n            if (userID === undefined) {\n                navigate(\"/\");\n            } else {\n                const adminCheck = await isUserAdmin(userID!);\n                if (myEntries && adminCheck) {\n                    setMyEntries(await getUsers());\n                }\n                const c = await getUsers();\n                setMyEntries(c);\n            }\n        } catch (err: any) {\n            setMyEntries(null);\n            handleError(err);\n        }\n    }\n\n    React.useEffect(() => { load(); }, [myEntries]);\n    React.useEffect(() => { hide(); }, []);\n\n    if (!myEntries) {\n        return <LoadingIndicator />\n    } else {\n        return (\n            <div>\n                <br></br>\n                <Container>\n                    <Row xs={2} md={4}>\n                        <Col>\n                            <h3>Alle registrierten User</h3>\n                        </Col>\n                        <Col>\n                            <Button variant=\"primary\" style={{ marginRight: '10px' }} onClick={() => { showCreate(); }}>Create User</Button>\n                        </Col>\n                    </Row>\n                    <br></br>\n                    <Row className=\"g-2\">\n                        {\n                            myEntries.users.map(myEntry =>\n                                <><Card key={myEntry.id} style={{ width: '20rem' }}>\n                                    <Card.Body>\n                                        <User user={myEntry}></User>\n                                    </Card.Body>\n                                    <Card.Footer>\n                                        <Button variant=\"success\" style={{ marginRight: '10px' }} onClick={() => { showEdit(myEntry) }}>Edit User</Button>\n                                        {myEntry.id !== userID ?\n                                            <Button variant=\"danger\" style={{ marginRight: '10px' }} onClick={() => { onDelete(myEntry.id!); }}>Delete User</Button>\n                                            : <></>\n                                        }\n                                    </Card.Footer>\n                                </Card></>\n                            )\n                        }\n                    </Row>\n                </Container>\n                <Fragment>\n                    <UserCreateDialog show={showDlg} onHide={hide}></UserCreateDialog>\n                </Fragment>\n                <Fragment>\n                    <UserEditDialog userResource={userResource} setUserResource={setUserResource} show={showDlg2} onHide={hide}></UserEditDialog>\n                </Fragment>\n            </div>\n        )\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}